{% extends "base.html" %}

{% block content %}
<section class="queue-section">
  <div class="queue-box">
    <h1 class="gradient-text">Metro Route Finder</h1>
    <p class="queue-subtitle">Select your stations from the list below ðŸš‡</p>

    <form method="POST" class="queue-form">
      <div class="form-group">
        <label for="start_station">Starting Station:</label>
        <select id="start_station" name="start_station" required>
          <option value="" disabled selected>Select origin...</option>
          {% for line_name, line_stations in stations.items() %}
            {% if line_name != 'interchanges' %}
              <optgroup label="{{ line_name | upper }}">
                {% for s in line_stations %}
                  <option value="{{ s }}">{{ s }}</option>
                {% endfor %}
              </optgroup>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="end_station">Destination Station:</label>
        <select id="end_station" name="end_station" required>
          <option value="" disabled selected>Select destination...</option>
          {% for line_name, line_stations in stations.items() %}
            {% if line_name != 'interchanges' %}
              <optgroup label="{{ line_name | upper }}">
                {% for s in line_stations %}
                  <option value="{{ s }}">{{ s }}</option>
                {% endfor %}
              </optgroup>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="search_type">Search Strategy:</label>
        <select id="search_type" name="search_type">
          <option value="BFS">Shortest Path (BFS)</option>
          <option value="DFS">Alternative Path (DFS)</option>
        </select>
      </div>

      <button type="submit" name="get_route" class="btn-primary">Find Route</button>
    </form>

    <div class="queue-line">
      <h2>Result:</h2>
      <ul>
        {% if message %}
          <li class="queue-item error" style="color: #ff4d4d;">{{ message }}</li>
        {% elif route %}
          {% for station in route %}
            <li class="queue-item">
              {{ station }}
              {% if not loop.last %}
                <span class="arrow" style="display: block; text-align: center; margin: 5px 0;">â†“</span>
              {% endif %}
            </li>
          {% endfor %}
        {% else %}
          <li class="queue-item empty">Select your stations and click "Find Route"</li>
        {% endif %}
      </ul>
    </div>
  </div>
</section>
{% endblock %}